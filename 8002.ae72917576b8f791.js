"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8002],{8002:(J,h,s)=>{s.r(h),s.d(h,{LoginPageModule:()=>F});var m=s(6895),u=s(433),c=s(4556),d=s(3128),S=s(655),t=s(8256),T=s(9019),y=s(8505),k=s(529),b=s(1135);function g(e){this.message=e}(g.prototype=new Error).name="InvalidCharacterError";var v=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var r=String(e).replace(/=+$/,"");if(r.length%4==1)throw new g("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,n,i=0,a=0,f="";n=r.charAt(a++);~n&&(o=i%4?64*o+n:n,i++%4)?f+=String.fromCharCode(255&o>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return f};function l(e){this.message=e}(l.prototype=new Error).name="InvalidTokenError";const p="token";let w=(()=>{class e{constructor(){}retornaToken(){var o;return null!==(o=localStorage.getItem(p))&&void 0!==o?o:""}salvaToken(o){localStorage.setItem(p,o)}excluiToken(){localStorage.removeItem(p)}possuiToken(){return!!this.retornaToken()}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),A=(()=>{class e{constructor(o){this.tokenService=o,this.usuarioSubject=new b.X({}),this.tokenService.possuiToken()&&this.decodificaJWT()}decodificaJWT(){const n=function L(e,r){if("string"!=typeof e)throw new l("Invalid token specified");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(function C(e){var r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(v(r).replace(/(.)/g,function(n,i){var a=i.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}catch(o){return v(r)}}(e.split(".")[o]))}catch(n){throw new l("Invalid token specified: "+n.message)}}(this.tokenService.retornaToken());this.usuarioSubject.next(n)}retornaUsuario(){return this.usuarioSubject.asObservable()}salvaToken(o){this.tokenService.salvaToken(o),this.decodificaJWT()}logout(){this.tokenService.excluiToken(),this.usuarioSubject.next({})}estaLogado(){return this.tokenService.possuiToken()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(w))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),M=(()=>{class e{constructor(o,n){this.httpClient=o,this.usuarioService=n,this.API=`${T.N.api_url}/login`}autentica(o){return this.httpClient.post(this.API,o,{observe:"response"}).pipe((0,y.b)(n=>{var i;console.log(n);const a=null!==(i=JSON.stringify(n.body).split('"')[3])&&void 0!==i?i:"";console.log(a),this.usuarioService.salvaToken(a)}))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(k.eN),t.LFG(A))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const I=[{path:"",component:(()=>{class e{constructor(o,n,i){this.authService=o,this.router=n,this.toastController=i}ngOnInit(){this.dados={nome:"",cpf:""}}login(){this.authService.autentica(this.dados).subscribe(()=>{this.router.navigate(["tabs"])},o=>{this.presentToast("bottom"),console.log(this.dados),console.log(o)})}presentToast(o){return(0,S.mG)(this,void 0,void 0,function*(){yield(yield this.toastController.create({message:"Nome ou senha inv\xe1lida",duration:3e3,cssClass:"custom-toast",position:o})).present()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(M),t.Y36(d.F0),t.Y36(c.yF))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:22,vars:2,consts:[[1,"login",3,"ngSubmit"],["loginForm","ngForm"],["fill","solid"],["position","floating"],["type","text","name","nome","required","",3,"ngModel","ngModelChange"],["slot","helper"],["type","password","name","cpf","required","",3,"ngModel","ngModelChange"],[1,"buttons"],["type","submit","color","dark"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Login"),t.qZA()()(),t.TgZ(4,"ion-content")(5,"form",0,1),t.NdJ("ngSubmit",function(){return n.login()}),t.TgZ(7,"ion-item",2)(8,"ion-label",3),t._uU(9,"Nome"),t.qZA(),t.TgZ(10,"ion-input",4),t.NdJ("ngModelChange",function(a){return n.dados.nome=a}),t.qZA(),t.TgZ(11,"ion-note",5),t._uU(12,"Insira seu nome completo"),t.qZA()(),t.TgZ(13,"ion-item")(14,"ion-label",3),t._uU(15,"Senha"),t.qZA(),t.TgZ(16,"ion-input",6),t.NdJ("ngModelChange",function(a){return n.dados.cpf=a}),t.qZA(),t.TgZ(17,"ion-note",5),t._uU(18,"Insira seu n\xfamero de registro Avient ou CPF"),t.qZA()(),t.TgZ(19,"div",7)(20,"ion-button",8),t._uU(21,"Entrar"),t.qZA()()()()),2&o&&(t.xp6(10),t.Q6J("ngModel",n.dados.nome),t.xp6(6),t.Q6J("ngModel",n.dados.cpf))},dependencies:[u._Y,u.JJ,u.JL,u.Q7,u.On,u.F,c.YG,c.W2,c.Gu,c.pK,c.Ie,c.Q$,c.uN,c.wd,c.sr,c.j9],styles:[".buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}ion-button[_ngcontent-%COMP%]{margin:1rem;width:100%}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(I),d.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,u.u5,c.Pc,Z]}),e})()}}]);